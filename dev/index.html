<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>MakieLayout.jl Tutorial · MakieLayout.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">MakieLayout.jl</span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>MakieLayout.jl Tutorial</a><ul class="internal"><li><a class="tocitem" href="#Scene-and-Layout-1"><span>Scene and Layout</span></a></li><li><a class="tocitem" href="#First-LAxis-1"><span>First LAxis</span></a></li><li><a class="tocitem" href="#Plotting-into-an-LAxis-1"><span>Plotting into an LAxis</span></a></li><li><a class="tocitem" href="#Multiple-Axes-1"><span>Multiple Axes</span></a></li><li><a class="tocitem" href="#Linking-Axes-1"><span>Linking Axes</span></a></li><li><a class="tocitem" href="#Adding-a-Legend-1"><span>Adding a Legend</span></a></li><li><a class="tocitem" href="#Fixing-Spacing-Issues-1"><span>Fixing Spacing Issues</span></a></li><li><a class="tocitem" href="#Sublayouts-1"><span>Sublayouts</span></a></li><li><a class="tocitem" href="#Adding-a-Colorbar-1"><span>Adding a Colorbar</span></a></li><li><a class="tocitem" href="#Adding-a-Title-1"><span>Adding a Title</span></a></li><li><a class="tocitem" href="#Subplot-Labels-1"><span>Subplot Labels</span></a></li></ul></li><li><a class="tocitem" href="grids/">GridLayout</a></li><li><a class="tocitem" href="laxis/">LAxis</a></li><li><a class="tocitem" href="llegend/">LLegend</a></li><li><a class="tocitem" href="layoutables_examples/">Layoutables Examples</a></li><li><a class="tocitem" href="theming/">Theming Layoutables</a></li><li><a class="tocitem" href="layouting/">How Layouting Works</a></li><li><a class="tocitem" href="faq/">Frequently Asked Questions</a></li><li><a class="tocitem" href="api_reference/">API Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>MakieLayout.jl Tutorial</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>MakieLayout.jl Tutorial</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/jkrumbiegel/MakieLayout.jl/blob/master/docs/src/index.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="MakieLayout.jl-Tutorial-1"><a class="docs-heading-anchor" href="#MakieLayout.jl-Tutorial-1">MakieLayout.jl Tutorial</a><a class="docs-heading-anchor-permalink" href="#MakieLayout.jl-Tutorial-1" title="Permalink"></a></h1><p>In this tutorial, we will see some of the capabilities of MakieLayout.jl while building a complex figure step by step. This is the final result we will create:</p><p><img src="step_21.svg" alt="step_21"/></p><p>All right, let&#39;s get started!</p><h2 id="Scene-and-Layout-1"><a class="docs-heading-anchor" href="#Scene-and-Layout-1">Scene and Layout</a><a class="docs-heading-anchor-permalink" href="#Scene-and-Layout-1" title="Permalink"></a></h2><p>First, we import the necessary packages and then create the main scene and layout. The function <code>layoutscene</code> is a convenience function that creates a <code>Scene</code> which has a <code>GridLayout</code> attached to it that always fills the whole scene area. You can pass the outer padding of the top layout as the first argument.</p><pre><code class="language-julia">using MakieLayout
using CairoMakie; CairoMakie.activate!()
using AbstractPlotting

outer_padding = 30
scene, layout = layoutscene(outer_padding, resolution = (1200, 700),
    backgroundcolor = RGBf0(0.98, 0.98, 0.98))</code></pre><p><img src="step_001.svg" alt="step_001"/></p><h2 id="First-LAxis-1"><a class="docs-heading-anchor" href="#First-LAxis-1">First LAxis</a><a class="docs-heading-anchor-permalink" href="#First-LAxis-1" title="Permalink"></a></h2><p>The scene is completely empty, I have made the background light gray so it&#39;s easier to see. Now we add an LAxis. This is an axis or subplot type that MakieLayout defines which knows how to behave in a layout (which the Makie version doesn&#39;t).</p><p>We create the axis and place it into the layout in one go. You place objects in a layout by using indexing syntax. You can save the axis in a variable by chaining the <code>=</code> expressions.</p><pre><code class="language-julia">ax1 = layout[1, 1] = LAxis(scene, title = &quot;Sine&quot;)</code></pre><p><img src="step_002.svg" alt="step_002"/></p><h2 id="Plotting-into-an-LAxis-1"><a class="docs-heading-anchor" href="#Plotting-into-an-LAxis-1">Plotting into an LAxis</a><a class="docs-heading-anchor-permalink" href="#Plotting-into-an-LAxis-1" title="Permalink"></a></h2><p>We can plot into the axis with the ! versions of Makie&#39;s plotting functions. Contrary to Makie, these calls return the plot objects, not the Scene or LAxis, so it&#39;s easier to save them.</p><pre><code class="language-julia">xx = 0:0.2:4pi
line1 = lines!(ax1, sin.(xx), xx, color = :red)
scat1 = scatter!(ax1, sin.(xx) .+ 0.2 .* randn.(), xx,
    color = (:red, 0.5), markersize = 15px, marker = &#39;■&#39;)</code></pre><p><img src="step_003.svg" alt="step_003"/></p><h2 id="Multiple-Axes-1"><a class="docs-heading-anchor" href="#Multiple-Axes-1">Multiple Axes</a><a class="docs-heading-anchor-permalink" href="#Multiple-Axes-1" title="Permalink"></a></h2><p>This looks nice already, but we want another axis with a cosine this time, to the right of the one we have. Currently our layout has one row and one cell, and only one LAxis inside of it:</p><pre><code class="language-julia">layout</code></pre><pre><code class="language-none">GridLayout[1, 1] with 1 children
 ┗━ [1:1 | 1:1] LAxis
</code></pre><p>We can extend the grid by indexing into new grid cells. Let&#39;s place a new axis next to the one we have, in row 1 and column 2.</p><pre><code class="language-julia">ax2 = layout[1, 2] = LAxis(scene, title = &quot;Shifted Cosine&quot;)</code></pre><p><img src="step_004.svg" alt="step_004"/></p><p>As you can see, the first axis has shrunk to the left to make space for the new axis on the right. We can take another look at the <code>layout</code> to see how it has changed:</p><pre><code class="language-julia">layout</code></pre><pre><code class="language-none">GridLayout[1, 2] with 2 children
 ┣━ [1:1 | 1:1] LAxis
 ┗━ [1:1 | 2:2] LAxis
</code></pre><p>Let&#39;s plot into the new axis, the same way we did the scatter plots before.</p><pre><code class="language-julia">line2 = lines!(ax2, cos.(xx), pi .+ xx, color = :blue)
scat2 = scatter!(ax2, cos.(xx) .+ 0.2 .* randn.(), pi .+ xx,
    color = (:blue, 0.5), markersize = 15px, marker = &#39;▲&#39;)</code></pre><p><img src="step_005.svg" alt="step_005"/></p><h2 id="Linking-Axes-1"><a class="docs-heading-anchor" href="#Linking-Axes-1">Linking Axes</a><a class="docs-heading-anchor-permalink" href="#Linking-Axes-1" title="Permalink"></a></h2><p>We want to make the left and right axes correspond to each other, so we can compare the plots more easily. To do that, we link both x and y axes. That will keep them synchronized.</p><pre><code class="language-julia">linkaxes!(ax1, ax2)</code></pre><p><img src="step_006.svg" alt="step_006"/></p><p>This looks good, but now both y-axes are the same, so we can hide the right one to make the plot less cluttered. We keep the grid lines, though. You can see that now that the y-axis is gone the two LAxes grow to fill the gap.</p><pre><code class="language-julia">hideydecorations!(ax2, grid = false)</code></pre><p><img src="step_007.svg" alt="step_007"/></p><p>Even though our plots are entirely made up, we should follow best practice and label the axes. We can do this with the <code>xlabel</code> and <code>ylabel</code> attributes of the <code>LAxis</code>.</p><pre><code class="language-julia">ax1.xlabel = &quot;Amplitude&quot;
ax2.xlabel = &quot;Amplitude&quot;
ax1.ylabel = &quot;Time [ms]&quot;</code></pre><p><img src="step_007_2.svg" alt="step_007 2"/></p><h2 id="Adding-a-Legend-1"><a class="docs-heading-anchor" href="#Adding-a-Legend-1">Adding a Legend</a><a class="docs-heading-anchor-permalink" href="#Adding-a-Legend-1" title="Permalink"></a></h2><p>Let&#39;s add a legend to our plot that describes elements from both axes. We use LLegend for that. LLegend is a relatively complex object and there are many ways to create it, but here we&#39;ll keep it simple. We place the legend on the right again, in row 1 and column 3. Instead of specifying column three, we can also say <code>end+1</code>.</p><pre><code class="language-julia">leg = layout[1, end+1] = LLegend(scene,
    [line1, scat1, line2, scat2],
    [&quot;True&quot;, &quot;Measured&quot;, &quot;True&quot;, &quot;Measured&quot;])</code></pre><p><img src="step_008.svg" alt="step_008"/></p><p>You can see one nice feature of MakieLayout here, which is that the legend takes much less horizontal space than the two axes. In fact, it takes exactly the space that it needs. This is possible because objects in MakieLayout can tell their width or height to their parent <code>GridLayout</code>, which can then shrink the row or column appropriately.</p><p>One thing that could be better about this plot, is that the legend looks like it belongs only to the right axis, even though it describes elements from both axes. So let&#39;s move it in the middle below the two. This is easily possible in MakieLayout, without having to recreate the plot from scratch. We simply assign the legend to its new slot.</p><p>We want it in the second row, and spanning the first two columns.</p><pre><code class="language-julia">layout[2, 1:2] = leg</code></pre><p><img src="step_009.svg" alt="step_009"/></p><h2 id="Fixing-Spacing-Issues-1"><a class="docs-heading-anchor" href="#Fixing-Spacing-Issues-1">Fixing Spacing Issues</a><a class="docs-heading-anchor-permalink" href="#Fixing-Spacing-Issues-1" title="Permalink"></a></h2><p>There are a couple of things wrong with this. The legend is where we want it, below the two axes. But it takes too much space vertically, and there is a large gap on the right.</p><p>Let&#39;s deal with the gap on the right first. It&#39;s the hole that was left by the legend, and it&#39;s even bigger now because it gets an equal share of space with the two axes, now that there is no legend shrinking the column width to its own size.</p><p>We can remove empty cells in a layout by calling <code>trim!</code> on it:</p><pre><code class="language-julia">trim!(layout)</code></pre><p><img src="step_010.svg" alt="step_010"/></p><p>This is much better already! But the legend still takes too much space vertically. The reason for that is the default <code>tellheight</code> setting of the legend. It&#39;s set to <code>false</code>, which essentially means that it can compute its own height, but doesn&#39;t tell the layout about it. This makes sense for the most common situation where the legend sits on the right of an axis. We wouldn&#39;t want the axis to shrink to the height of the legend. But now that the legend has its own row, we do want this behavior. So we set the <code>tellheight</code> attribute to <code>true</code>.</p><pre><code class="language-julia">leg.tellheight = true</code></pre><p><img src="step_011.svg" alt="step_011"/></p><p>Now the legend&#39;s row is shrunk to fit. One thing that we can do to improve the use of space is to change the legend&#39;s orientation to <code>:horizontal</code>.</p><pre><code class="language-julia">leg.orientation = :horizontal</code></pre><p><img src="step_012.svg" alt="step_012"/></p><h2 id="Sublayouts-1"><a class="docs-heading-anchor" href="#Sublayouts-1">Sublayouts</a><a class="docs-heading-anchor-permalink" href="#Sublayouts-1" title="Permalink"></a></h2><p>Let&#39;s add two new axes with heatmaps! We want them stacked on top of each other on the right side of the figure. We&#39;ll do the naive thing first, which is to place them in the first and second row of the third column. There are multiple versions of layout assignment syntax for convenience. Here, we create and assign two axes at once. The number of cells and objects has to match to do this.</p><pre><code class="language-julia">hm_axes = layout[1:2, 3] = [LAxis(scene, title = t) for t in [&quot;Low Activity&quot;, &quot;High Activity&quot;]]

heatmaps = [heatmap!(ax, i .+ rand(100, 100)) for (i, ax) in enumerate(hm_axes)]</code></pre><p><img src="step_013.svg" alt="step_013"/></p><p>This looks weird, the two axes do not have the same height. Rather, the lower one has the height of the legend in the same row. What can we do to remedy this situation?</p><p>We have to recognize that what we want is not possible with one layout. We don&#39;t care about the heatmap axes being the same height as the other two axes and the legend, respectively. We only care that the top and the bottom of the two groups are aligned.</p><p>There is usually more than one solution for any given layout problem. In other plotting software, people sometimes circumvent our current issue by dividing the layout into many more cells than there are content objects, and have the content span several rows or columns. For example the left axes span rows 1:10, the legend 10:12, while the heatmap axes span rows 1:6 and 7:12, respectively. This is complicated, not very flexible, and luckily unnecessary in MakieLayout.</p><p>We will instead help ourselves by using a nested <code>GridLayout</code>, just for the two heatmap axes. We move the axes into it by assigning them to their new slots. The detaching from the main layout happens automatically.</p><pre><code class="language-julia">hm_sublayout = GridLayout()
layout[1:2, 3] = hm_sublayout

# there is another shortcut for filling a GridLayout vertically with
# a vector of content
hm_sublayout[:v] = hm_axes</code></pre><p><img src="step_014.svg" alt="step_014"/></p><p>We don&#39;t care about the axis decorations, as it&#39;s often the case with image plots. The function <code>hidedecorations!</code> hides both x and y decorations at once. Also, the default autolimits are computed with a small margin, which doesn&#39;t look good in our case. We can set the autolimit margins to zero using <code>tightlimits!</code>.</p><pre><code class="language-julia">tightlimits!.(hm_axes)
hidedecorations!.(hm_axes)</code></pre><p><img src="step_015.svg" alt="step_015"/></p><h2 id="Adding-a-Colorbar-1"><a class="docs-heading-anchor" href="#Adding-a-Colorbar-1">Adding a Colorbar</a><a class="docs-heading-anchor-permalink" href="#Adding-a-Colorbar-1" title="Permalink"></a></h2><p>Now, we also want to add a color bar for the two heatmaps. Right now, their colors are independently scaled from each other. We choose a scale that makes sense for both of them (in our case, we know data ranges only from 1 to 3) and assign that to both heatmaps. Then we create an <code>LColorbar</code> object with one of the heatmaps. This way, the color bar copies color range and color map from that heatmap.</p><p>We want to place the color bar to the right of the heatmaps, spanning the full height. We could either place it within the sublayout we just created, or in the main layout. Both versions can be made to look the same, but we&#39;ll choose the sublayout, because that is a more meaningful grouping, and we could move the whole assembly around later by moving only the sublayout.</p><p>We can place an object along all existing rows or columns using the <code>:</code> notation.</p><pre><code class="language-julia">for hm in heatmaps
    hm.colorrange = (1, 3)
end

cbar = hm_sublayout[:, 2] = LColorbar(scene, heatmaps[1], label = &quot;Activity Level&quot;)</code></pre><p><img src="step_016.svg" alt="step_016"/></p><p>The color bar is quite chunky because it takes 50% of the available width in the sublayout. Let&#39;s give it a fixed width of 30 units.</p><pre><code class="language-julia">cbar.width = 30</code></pre><p><img src="step_017.svg" alt="step_017"/></p><p>Much better! Note that you can usually set all attributes during creation of an object (<code>LColorbar(scene, width = 30)</code>) or after the fact, like in this example.</p><p>Objects can also have a width or height relative to the space given to them by their parent <code>GridLayout</code>. If we feel that the colorbar is a bit too tall, we can shrink it to two thirds of the available height using <code>Relative(2/3)</code>.</p><p>If you only specify a number like <code>30</code>, it is interpreted as <code>Fixed(30)</code>.</p><pre><code class="language-julia">cbar.height = Relative(2/3)</code></pre><p><img src="step_18.svg" alt="step_18"/></p><h2 id="Adding-a-Title-1"><a class="docs-heading-anchor" href="#Adding-a-Title-1">Adding a Title</a><a class="docs-heading-anchor-permalink" href="#Adding-a-Title-1" title="Permalink"></a></h2><p>Now the plot could use a title! While other plotting packages sometimes have functions like <code>supertitle</code>, they often don&#39;t work quite right or force you to make manual adjustments. In MakieLayout, the <code>LText</code> object is much more flexible as it allows you to place text anywhere you want. We therefore create our super title not with a dedicated function but as a simple part of the whole layout.</p><p>How can we place content in a row above row 1? This is easy in MakieLayout, as indexing outside of the current GridLayout cells works not only with higher numbers but also with lower numbers. Therefore, we can index into the zero-th row, which will create a new row and push all other content down.</p><p>Note that after this, all the cell indices of our current content will have changed to reflect the new GridLayout size.</p><pre><code class="language-julia">supertitle = layout[0, :] = LText(scene, &quot;Plotting with MakieLayout&quot;,
    textsize = 30, font = &quot;Noto Sans Bold&quot;, color = (:black, 0.25))</code></pre><p><img src="step_19.svg" alt="step_19"/></p><h2 id="Subplot-Labels-1"><a class="docs-heading-anchor" href="#Subplot-Labels-1">Subplot Labels</a><a class="docs-heading-anchor-permalink" href="#Subplot-Labels-1" title="Permalink"></a></h2><p>In figures meant for publication, you often need to label subplots with letters or numbers. These can sometimes cause trouble because they overlap with other content, which has to be fixed after the fact in vector graphics software.</p><p>This is not necessary in MakieLayout. Let&#39;s place letters in the upper left corners of the left group and the right group. To do that, we will make use of a property of layouts that we have used without mentioning it. When we place our letters, we want them to act similarly to the axis titles or labels. In MakieLayout, layoutable objects have an inner part, which is considered the &quot;important&quot; area that should align with other &quot;important&quot; inner areas. You can see that the three upper axes align with their top spines, and not their titles.</p><p>All that is outside of the main area is part of the &quot;protrusions&quot;. These help keeping the logic of the layout simple while allowing to easily align what is supposed to be aligned.</p><p>So for our corner letters, we don&#39;t want to create new columns or rows. Doing that would probably cause alignment issues in most cases. Instead, we place these objects <em>inside</em> the protrusions of existing cells. That means they are part of the gaps between columns and rows, which is fitting for our labels.</p><p>We can do this by specifying the <code>Side</code> as a third argument when indexing the layout. The default we have used so far is <code>Inside()</code>. For us, <code>TopLeft()</code> is the correct choice. (Remember that our previously first row is now the second row, due to the super title.)</p><pre><code class="language-julia">label_a = layout[2, 1, TopLeft()] = LText(scene, &quot;A&quot;, textsize = 35,
    font = &quot;Noto Sans Bold&quot;, halign = :right)
label_b = layout[2, 3, TopLeft()] = LText(scene, &quot;B&quot;, textsize = 35,
    font = &quot;Noto Sans Bold&quot;, halign = :right)</code></pre><p><img src="step_20.svg" alt="step_20"/></p><p>That looks good! You can see that the letters, larger than the axis titles, have increased the gap between the title and the axes to fit them. In most other plotting software, you would probably have an overlap issue now.</p><p>One last thing we&#39;ll fix, is giving the labels a bit of padding at the bottom and the right, so they are not too close to the axes. The order of the padding values is (left, right, bottom, top).</p><pre><code class="language-julia">label_a.padding = (0, 6, 16, 0)
label_b.padding = (0, 6, 16, 0)</code></pre><p><img src="step_21.svg" alt="step_21"/></p><p>And there we have it! Hopefully this tutorial has given you an overview how to approach the creation of a complex figure in MakieLayout. Check the rest of the documentation for more details and other dynamic parts like sliders and buttons!</p></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="grids/">GridLayout »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Sunday 17 May 2020 18:38">Sunday 17 May 2020</span>. Using Julia version 1.4.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
